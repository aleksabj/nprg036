{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "http://example.org/json-schemas/schema-1",
  "title": "Screenings hierarchy (JSON-LD)",
  "anyOf": [
    { "$ref": "#/$defs/ArrayRoot" },
    { "$ref": "#/$defs/GraphRoot" }
  ],
  "$defs": {
    "ScreeningItem": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "@context": { "type": "object" },
        "id": { "type": "string", "format": "uri" },
        "type": { "const": "ScreeningEvent" },
        "name": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "label": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "startDate": { "type": "string", "format": "date-time" },
        "location": {
          "oneOf": [
            { "type": "string", "format": "uri" },
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "id": { "type": "string", "format": "uri" },
                "type": { "const": "Place" },
                "label": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } }
              },
              "required": ["id", "type", "label"]
            }
          ]
        },
        "showsFilm": {
          "oneOf": [
            { "type": "string", "format": "uri" },
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "id": { "type": "string", "format": "uri" },
                "type": { "const": "Movie" },
                "name": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
                "label": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
                "durationMinutes": { "type": "integer", "minimum": 1 },
                "datePublished": { "type": "string", "pattern": "^[0-9]{4}$" },
                "hasAward": {
                  "oneOf": [
                    { "type": "string", "format": "uri" },
                    { "type": "array", "minItems": 1, "items": { "type": "string", "format": "uri" } }
                  ]
                }
              },
              "required": ["id", "type", "name", "label", "durationMinutes", "datePublished"]
            }
          ]
        }
      },
      "required": ["id", "type", "name", "label", "startDate", "location", "showsFilm"]
    },

    "ArrayRoot": {
      "type": "array",
      "minItems": 3,
      "items": { "$ref": "#/$defs/ScreeningItem" }
    },

    "GraphRoot": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "@context": { "type": "object" },
        "@graph": {
          "type": "array",
          "minItems": 3,
          "items": { "$ref": "#/$defs/ScreeningItem" }
        }
      },
      "required": ["@context", "@graph"]
    }
  }
}
