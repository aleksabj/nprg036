{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "http://example.org/json-schemas/schema-2",
  "title": "People & Awards hierarchy (JSON-LD)",
  "anyOf": [
    { "$ref": "#/$defs/ArrayRoot" },
    { "$ref": "#/$defs/GraphRoot" }
  ],
  "$defs": {
    "Actor": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "@context": { "type": "object" },
        "id":   { "type": "string", "format": "uri" },
        "type": { "const": "Actor" },
        "name":  { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "label": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "birthYear": { "type": "string", "pattern": "^[0-9]{4}$" },
        "phone":     { "type": "string", "pattern": "^tel:.+" },
        "actsIn":    { "type": "array", "minItems": 1, "items": { "type": "string", "format": "uri" } }
      },
      "required": ["id", "type", "name", "label", "birthYear", "phone", "actsIn"]
    },
    "Director": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "@context": { "type": "object" },
        "id":   { "type": "string", "format": "uri" },
        "type": { "const": "Director" },
        "name":  { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "label": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "birthYear": { "type": "string", "pattern": "^[0-9]{4}$" },
        "phone":     { "type": "string", "pattern": "^tel:.+" },
        "directs": {
          "oneOf": [
            { "type": "string", "format": "uri" },
            { "type": "array", "minItems": 1, "items": { "type": "string", "format": "uri" } }
          ]
        }
      },
      "required": ["id", "type", "name", "label", "birthYear", "phone", "directs"]
    },
    "Award": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "@context": { "type": "object" },
        "id":   { "type": "string", "format": "uri" },
        "type": { "const": "Award" },
        "name":  { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "label": { "type": "object", "minProperties": 1, "additionalProperties": { "type": "string" } },
        "prizeMoney": { "type": "number" },
        "awardedTo":  { "type": "string", "format": "uri" }
      },
      "required": ["id", "type", "name", "label", "prizeMoney", "awardedTo"]
    },

    "OneOfItem": { "oneOf": [ { "$ref": "#/$defs/Actor" }, { "$ref": "#/$defs/Director" }, { "$ref": "#/$defs/Award" } ] },

    "ArrayRoot": {
      "type": "array",
      "minItems": 3,
      "items": { "$ref": "#/$defs/OneOfItem" }
    },

    "GraphRoot": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "@context": { "type": "object" },
        "@graph": {
          "type": "array",
          "minItems": 3,
          "items": { "$ref": "#/$defs/OneOfItem" }
        }
      },
      "required": ["@context", "@graph"]
    }
  }
}
